{% extends 'layout.njk' %}

{% block classes %}page page--show{% endblock %}

{% block content %}
    <script type="text/data" id="encrypted-message">{{ message }}</script>

    <div id="letter" class="letter letter--striped letter--spaced"  data-available-until="{{ activeUntilTimestamp }}">
        <div class="js--stage-form">
            <div class="letter__header">
                <button class="btn btn--nano js--toggle-stage" data-view="raw" style="display: inline-block;">{% block words_view_raw_button %}view raw{% endblock %}</button>
                <button class="btn btn--nano js--toggle-stage" data-view="text">{% block words_view_text_button %}view text{% endblock %}</button>
            </div>
            <pre class="letter__body" data-stage="text" style="display: block;"><code id="message">{% block words_encrypting_message_placeholder %}Encrypting message, please wait ...{% endblock %}</code></pre>
            <div class="letter__body" data-stage="raw">
                <textarea class="input input--textarea input--raw js--select-text" id="raw-message" readonly rows="10"></textarea>
            </div>
            <div class="letter__footer">
                <div class="u--danger">
                    {% block words_encryption_availability_note %}PS: This message destroys itself{% endblock %} <span title="{{ activeUntilDate }}">{{ timeRemaining }}</span>
                </div>
            </div>
        </div>
    </div>

    <div class="u--center">
        <button class="btn btn--primary js--destroy-message" data-action="/{{ token }}/">{% block words_destroy_message_button %}I'm done, destroy message{% endblock %}</button>
    </div>
{% endblock %}
